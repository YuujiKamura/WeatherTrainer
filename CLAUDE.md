# WeatherTrainer

ClaudeCodeと学ぶ予報士試験2025

## 目的
気象予報士試験対策におけるAI学習支援の実験的検証。試験で落とした問題を通じて学習効果を最大化する。
- AI（ClaudeCode）による気象学的概念の解説生成、GITを使用した進捗管理
- 複雑な気象現象の理解促進におけるAI活用可能性の探求

## 作業フロー（Claude Code再起動時）

### 基本フロー（スケーラブル）
1. **間違い問題の特定**: Excelファイルから間違えた問題を確認
2. **PDF全体画像化**: `python extract_pdf_images.py [PDFパス] -s 1 -e [最終ページ]`で全ページを画像として抽出
3. **問題ページ対応表作成**: 全ページの画像を確認し、問題番号とページ番号の対応表をMarkdownで作成
4. **自動テンプレート生成**: 不正解問題について以下を自動実行
   - 問題文の文字起こし（OCR）
   - 図版リンクの設定
   - 解説テンプレートの生成（空欄状態）
   - **重要**: 自分の解答と正解を事実として記載（これは紛れのない情報）
5. **解説作成**: 事実（自分の解答・正解）から始めて、Claude Codeとの対話で詳細解説を作成
### 解説作成の詳細方針
   - **事実から開始**: 必ず「自分の解答→正解」という事実から対話を開始
   - **推奨形式**: 試験で間違えた場合は実際の対話形式を採用
   - **対話の自然な記録**: Claude Codeとの自然な対話のやり取りをそのまま記録
   - **形式的なQ&A禁止**: 実際のプロンプトでの会話を再現
   - **重要**: AI主導の解説は避ける。「知らん専門単語の札束で往復ビンタ・宇宙ロケット発射」状態になる
   - **人間視点重視**: 「なぜ間違えたのか」「どこで迷ったのか」から始める
   - **外部検索による検証**: AIの空想的解説ではなく、外部検索（WebSearch）で事実確認を行う
   - **対話内容の正確な記録**: 求めているのは対話の記録であり、AIによる勝手な解釈や補完ではない

### 自動化のポイント
- **問題文字起こし→テンプレート生成**: 一括処理可能
- **事実情報の記載**: 自分の解答と正解は自動で記載
- **解説部分**: 人間との対話で個別に作成（自動化困難）

### 重要な注意点
- **不確実事項の断定禁止**: 推測による正答を「## 正答：①」のように断定的に記載しない
- **記録すべきは事実のみ**: 「## 正答：（記録なし）」「## 正答：（要確認）」または空欄とする
- **余計な作業提案の回避**: 正答確認のための検索等は頼まれていない限り提案しない

## 気象業務支援センターが公開している過去問題について
- 図版ファイルをGitトラッキングに含めず、ローカルにのみ維持
- 問題文の文字起こしについても、厳密には転載許可が必要のはずだが、さすがにないと解説が意味不明なので現状維持、このあたりは良識の範囲内で都度対応していく。

## 利用可能なスクリプト

### read_pdf.py
PDFファイルから問題文を抽出するスクリプト

**注意:** 気象予報士試験の過去問PDFは暗号化等により文字化けが発生するため、実用性が低い。問題文の取得にはextract_pdf_images.pyでの画像化→OCRが推奨。

**使用方法:**
```bash
python read_pdf.py [PDFファイルパス]
python read_pdf.py [PDFファイルパス] -s [開始ページ] -e [終了ページ]
python read_pdf.py [PDFファイルパス] -m [最大文字数]
```

**オプション:**
- `-s, --start`: 開始ページ（1から始まる）
- `-e, --end`: 終了ページ
- `-m, --max-chars`: 最大表示文字数（デフォルト: 5000）

**必要ライブラリ:** PyMuPDF または PyPDF2

### read_xlsx.py
Excelファイルから学習記録や問題データを読み取るスクリプト

**使用方法:**
```bash
python read_xlsx.py [Excelファイルパス]
python read_xlsx.py [Excelファイルパス] -s [シート名]
python read_xlsx.py [Excelファイルパス] -l  # シート一覧表示
```

**オプション:**
- `-s, --sheet`: 読み取るシート名
- `-l, --list`: シート一覧を表示
- `--header`: ヘッダー行の番号（デフォルト: 0）

**必要ライブラリ:** pandas

### extract_pdf_images.py
PDFから図版を画像として抽出するスクリプト

**使用方法:**
```bash
python extract_pdf_images.py [PDFファイルパス] -p [ページ番号]
python extract_pdf_images.py [PDFファイルパス] -s [開始ページ] -e [終了ページ]
```

**オプション:**
- `-p, --page`: 抽出するページ番号（1から始まる）
- `-s, --start`: 開始ページ
- `-e, --end`: 終了ページ
- `-d, --dpi`: 解像度（デフォルト: 150）
- `-o, --output`: 出力ディレクトリ（デフォルト: extracted_images）

**必要ライブラリ:** PyMuPDF

## 技術要件
- Python 3.x
- Claude Code（解説作成用）
- 必要なPythonライブラリ：
  - PyMuPDF（fitz）
  - pandas
  - PyPDF2（オプション）